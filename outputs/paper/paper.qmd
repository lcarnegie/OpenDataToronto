---
title: "Exploring TTC Delays"
subtitle: "A Multimodal Analysis"
author: Luca Carnegie
thanks: "Code and data are available at: https://github.com/lcarnegie/OpenDataToronto. Thank you to Nescaf√© coffee, Rajan Maghera, Egg McMuffins, Hannah Yu, and Sehar Bajwa for your love and support - could not have done it without you. No thanks go to Rohan in particular for not pointing out all the R he wanted us to learn that was in his textbook... sigh. I will try the appendix cocktails someday, though. :)"
date: today
date-format: long
abstract: "First sentence. Second sentence. Third sentence. Fourth sentence."
format: pdf
fig_caption: yes
number-sections: true
bibliography: references.bib
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(knitr)
library(janitor)
library(lubridate)
library(opendatatoronto)
library(tidyverse)
library(tidyr)
library(data.table)
library(dplyr)
library(kableExtra)
```

# Introduction

A key area of improvement in Canadian sustainability is in increasing the use of public transportation in big cities like Toronto. This makes sense since cars account for about 80% of transportation emissions [@diaetal]. However, a major drawback preventing the widespread use of public transportation is the existence of delays within the transit system. These delays incentivize citizens toward using less sustainable alternatives like private cars, leading to congestion on highways and consequent increased emissions. The lack of timely transit services have a demonstrated impact on traffic. One study by Anderson et al. estimated a whopping 47 percent increase in highway delay when transit service ceased completely in a big city such as Los Angeles [@anderson]. It is clear to see, then, that it is imperative that policy makers understand and fix these delays to improve sustainability.

The "TTC", or Toronto Transit Commission, has been Toronto's transit system since 1921, serving the city population with subways, streetcars, buses, along with smaller offerings. The openly available data surrounding the delays of these various modes of transport offers opportunity to investigate the root causes of the longer-lasting delays. Understanding what caused a delay, when it was caused and where it was caused could give the TTC more insight into how to deliver their services to the public more efficiently and effectively, setting an examples of what an effective transit agency could look like.

This paper aims to find relationships and patterns of public transit delay time across various genres of transportation. First, the data source and analysis employed are covered. Section Three then critically examines the data, delving deeper to arrive at various conclusions, as well as discussing implications and proposing new areas of exploration.

# Data {#sec-data}

To investigate transit delays in Toronto, data on bus [@busdata], subway [@subwaydata], and streetcar [@streetcardata] delay incidents for the year 2023 was downloaded using the OpenDataToronto R package [@odt]. Then, the data was cleaned using R [@citeR], tidyverse [@tidyverse] and it's associated packages. After combining the datasets together, variables common between datasets and relevant to the analysis were selected. In the case of this analysis, the variables included were date (year, month, day), day of the week, Location of Delay Incident, Cause of Delay, the time delay (in minutes), Vehicle (bus, subway, streetcar), as well as the route/line (simplified to 'line') the vehicle was on when the incident happened. (Perhaps add seasonal analysis??)

## General Delay Analysis {#subsec1-data}

```{r}
#| message: false
#| echo: false
#| label: tbl-cleaned_data
#| tbl-cap: Sample of Cleaned Delay Data
#| fig-align: center

cleaned_transit_data <- read_csv(here::here("outputs/data/cleaned_dataset.csv"))

sample_table <- head(cleaned_transit_data, 5) 

knitr::kable(sample_table)
```

# Discussion {#sec-discussion}

# References

---
nocite: |
  @citeR, @ggplot, @odt, @janitor, @lubridate, @tidyverse, @dplyr, @ggplot, @testthat, @MartinWittmanLi, @diaetal, @anderson,
---
